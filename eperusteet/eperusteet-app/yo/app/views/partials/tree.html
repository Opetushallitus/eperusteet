<div>
  <div ng-if="!lisataanUuttaOsaa" class="tree col-lg-6 col-md-8 col-xs-12">
    <div class="tree-con">
      <tree apumuuttujat="apumuuttujat" muokkaus="muokkaus" ng-hide="rakenne.$resolved" rakenne="rakenne.rakenne" tutkinnon-osat="rakenne.tutkinnonOsat" uusi-tutkinnon-osa="uusiTutkinnonOsa"></tree>
    </div>
  </div>
  <div ng-if="muokkaus" class="skratchpad-wrapper pull-right" follow-scroll>
    <div class="skratchpad-button"><button class="btn btn-default" ng-click="ryhmaModaali(rakenne.$suoritustapa)"><img src="images/ryhma.png" alt=""> {{ 'luo-uusi-ryhma' | kaanna }}</button></div>
    <div class="skratchpad-list">
      <p class="skratchpad-list-header" translate>leikelauta</p>
      <div ng-if="skratchpad.length === 0" class="skratchpad-help">
      </div>
      <ul ui-sortable="sortableOptions" class="tree-group skratchpad" ng-model="skratchpad">
        <li class="skratchpad-item" ng-class="{ 'skratchpad-item-ryhma': !osa._tutkinnonOsa, 'skratchpad-item-virhe': osa.$virhe }" ng-repeat="osa in skratchpad">
          <div ng-if="osa._tutkinnonOsa">
            <img src="images/tutkinnonosa.png" alt=""> {{ rakenne.tutkinnonOsat[osa._tutkinnonOsa].nimi | kaanna:true }}
            <span class="pull-right">
              <a href="" ng-click="poista(skratchpad, osa)"><span class="glyphicon glyphicon-remove"></span></a>
            </span>
          </div>
          <div ng-if="osa.osat !== undefined">
            <span>{{osa.nimi | kaanna:true}} <span ng-show="osa.osat.length > 0">({{ osa.osat.length }} {{ 'osaa' | kaanna }})</span></span>
            <span class="pull-right">
              <span ng-show="osa.$uusi" class="badge skratchpad-badge">{{ 'uusi' | kaanna }}</span>
              <a href="" ng-click="ryhmaModaali(apumuuttujat.suoritustapa, osa)">
                <span class="glyphicon glyphicon-pencil"></span>
              </a>
            </span>
          </div>
        </li>
      </ul>
    </div>
    <div class="skratchpad-list">
      <p class="skratchpad-list-header" translate>tutkinnonosat</p>
      <div ng-show="tutkinnonOsat.rajaus || tutkinnonOsat.multiPage" class="tutkinnonosa-rajaus">
        <input ng-change="paivitaRajaus(tosarajaus)" ng-model="tosarajaus" type="input" class="form-control" placeholder="Rajaa tutkinnon osia..."></input>
      </div>
      <ul ui-sortable="sortableOptionsUnique" ng-model="uniikit" class="uniikit placeholder-hide">
        <li class="skratchpad-item" ng-repeat="osa in uniikit | startFrom:(tutkinnonOsat.sivu-1)*tutkinnonOsat.perSivu | limitTo:tutkinnonOsat.perSivu">
          <img src="images/tutkinnonosa.png" alt="">
          {{ rakenne.tutkinnonOsat[osa._tutkinnonOsa].nimi | kaanna:true }}<span ng-if="apumuuttujat.suoritustapa !== 'naytto' && rakenne.tutkinnonOsat[osa._tutkinnonOsa].laajuus">, {{ + rakenne.tutkinnonOsat[osa._tutkinnonOsa].laajuus || 0 }}{{ rakenne.tutkinnonOsat[osa._tutkinnonOsa].yksikko | kaanna }}</span>
          <span class="badge skratchpad-badge" ng-show="!kaytetytUniikit[osa._tutkinnonOsa]" title="{{ 'tutkinnonosa-ei-käytössä' | kaanna }}"><span class="glyphicon glyphicon-asterisk"></span></span>
          <span class="pull-right">
            <a href="" ng-click="rakenne.tutkinnonOsat[osa._tutkinnonOsa].$elevate = false"><span ng-show="rakenne.tutkinnonOsat[osa._tutkinnonOsa].$elevate" class="glyphicon glyphicon-eye-open"></span></a>
            <a href="" ng-click="rakenne.tutkinnonOsat[osa._tutkinnonOsa].$elevate = true"><span ng-hide="rakenne.tutkinnonOsat[osa._tutkinnonOsa].$elevate" class="glyphicon glyphicon-eye-close"></span></a>
          </span>
        </li>
      </ul>
      <pagination ng-show="tutkinnonOsat.multiPage" ng-model="tutkinnonOsat.sivu" ng-change="valitseSivu(tutkinnonOsat.sivu)"
                  total-items="uniikit.length" items-per-page="tutkinnonOsat.perSivu"></pagination>
    </div>
  </div>
  <div class="clearfix"></div>
</div>
