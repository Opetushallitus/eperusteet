<div>
  <accordion close-others="$parent.section.model.oneAtATime">
    <accordion-group class="inner-accordion" ng-repeat="section in $parent.section.model.sections" is-open="section.$open">
      <accordion-heading>
        <span class="glyphicon" ng-class="{'glyphicon-chevron-down': section.$open, 'glyphicon-chevron-right': !section.$open}"></span>
        {{section.title | kaanna}}
      </accordion-heading>
      <div ng-if="!section.include && section.items && section.items.length > 0">
        <ul class="multichoice">
          <li class="toggle-all"><label><input type="checkbox" ng-model="section.$all" ng-change="section.toggleAll(section)">{{'valitse-kaikki' | kaanna }}</label></li>
        </ul>
        <ul class="multichoice" ng-class="{condensed: condensed}">
          <li ng-repeat="item in section.items" ng-class="'level' + (item.depth || 0)">
            <label><input type="checkbox" ng-model="item.$selected" ng-change="section.updateSisallot(item, section)">{{item.label | kaanna}}</label>
          </li>
        </ul>
      </div>
      <div ng-if="section.include" ng-include="section.include"></div>
    </accordion-group>
  </accordion>
</div>
