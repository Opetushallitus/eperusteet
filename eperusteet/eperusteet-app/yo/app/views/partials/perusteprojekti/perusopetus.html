<div class="main-content" id="main">
    <div class="row tutkinto-sisalto">

        <div class="tutkinto">
            <div ng-hide="muokkausTutkintokohtaisetOsat">
                <div class="toolbar-input pull-left">
                    <rajaus model="rajaus" placeholder="etsi-sisallosta" callback="rajaaSisaltoa(value)"></rajaus>
                </div>
                <a ng-click="avaaSuljeKaikki()" class="open-close action-link"><span class="avaa-sulje" icon-role="ep-open-close">{{ 'avaa-sulje-kaikki' | kaanna }}</span></a>
            </div>

            <div class="clearfix"></div>

            <h2>
                {{'opetuksen-sisallot' | kaanna}}
                <!-- <a ng-click="avaaSuljeKaikki(datat.opetus)" class="action-link"><span class="avaa-sulje"><img src="images/expander.png" alt="">{{ 'avaa-sulje-kaikki' | kaanna }}</span></a> -->
            </h2>
            <!-- <div ng-show="muokkausTutkintokohtaisetOsat" class="rakenteen-muokkaus">
                <h2 kaanna>Muokkaa tekstikappaleiden rakennetta</h2>
                <a ng-click="avaaSuljeKaikki(peruste.sisalto)" class="action-link"><span class="avaa-sulje"><img src="images/expander.png" alt="">{{ 'avaa-sulje-kaikki' | kaanna }}</span></a>
            </div> -->
            <div class="clearfix"></div>
            <!-- <div ng-include="'views/partials/perusteprojekti/sisaltoOsa.html'"></div> -->

            <!-- TODO: korvaa direktiivillä ====> -->

            <div class="sisalto">
              <div class="sisalto-group">
                <div ng-init="indent = 0" ng-repeat="sisalto in datat.opetus.lapset">
                  <div ng-show="sisalto.$filtered || rajaus.length === 0">
                    <div class="sisalto-list-element" ng-class="{ 'striped': indent === 0 }" >
                      <a ng-href="{{opetusHref(sisalto)}}" class="otsikko">
                        <div ng-click="$event.preventDefault(); sisalto.$opened = !sisalto.$opened" class="chevron">
                          <span ng-show="sisalto.lapset.length > 0" class="glyphicon" ng-class="sisalto.$opened ? 'glyphicon-chevron-down' : 'glyphicon-chevron-right'"></span>
                          <span ng-show="sisalto.lapset.length === 0" class="ep-icon" ng-class="sisalto.$type ? sisalto.$type : 'ep-text'"></span>
                        </div>
                        <h3>
                          <span ep-highlight="rajaus">{{ sisalto.nimi | kaanna }}</span>
                        </h3>
                        <div class="muokattu-info">
                          <span ng-attr-title="{{ 'muokattu-viimeksi' | kaanna }}">{{ sisalto.muokattu | aikaleima }}</span>
                        </div>
                      </a>
                  </div>
                </div>
                <div ng-show="sisalto.lapset.length === 0 || sisalto.$opened || (sisalto.$filtered && rajaus.length !== 0)">
                  <div class="sisalto-group">
                    <!-- TODO tuki useammalle tasolle (oppimäärät oppiaineessa) -->
                    <div ng-show="lapsi.$filtered || rajaus.length === 0" ng-init="indent = 1" ng-repeat="lapsi in sisalto.lapset" style="padding-left: 40px;">
                      <div class="sisalto-list-element">
                        <a ng-href="{{sisaltoHref(sisalto, lapsi)}}" class="otsikko">
                          <div class="chevron">
                            <span ng-show="!lapsi.lapset || lapsi.lapset.length === 0" class="ep-icon" ng-class="lapsi.$type ? lapsi.$type : 'ep-text'"></span>
                          </div>
                          <h3>
                            <span ep-highlight="rajaus">{{ lapsi.nimi | kaanna }}</span>
                          </h3>
                          <div class="muokattu-info">
                            <span ng-attr-title="{{ 'muokattu-viimeksi' | kaanna }}">{{ lapsi.muokattu | aikaleima }}</span>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- <==== -->

            <div class="info-box" ng-show="datat.opetus.lapset.length === 0">
                {{ 'suoritustavalle-ei-ole-vielä-sisältöä' | kaanna }}.
            </div>

            <h2>
                {{ 'tekstikappaleet' | kaanna }} ({{ peruste.sisalto.lapset.length }})
                <div class="pull-right buttons">
                    <button type="button" class="btn btn-default btn-sm" ng-click="addTekstikappale()" icon-role="ep-text-add" kaanna="lisaa-tutkintokohtainen-osa"></button>
                    <button class="btn btn-default btn-sm"
                            ng-class="{ 'btn-primary': muokkausTutkintokohtaisetOsat }" ng-click="aloitaMuokkaus()"
                            ng-show="valittuSuoritustapa !== ''" icon-role="edit" kaanna="muokkaa-rakennetta">
                    </button>
                </div>
            </h2>
            <!-- <div ng-show="muokkausTutkintokohtaisetOsat" class="rakenteen-muokkaus">
                <h2 kaanna>Muokkaa tekstikappaleiden rakennetta</h2>
                <a ng-click="avaaSuljeKaikki(peruste.sisalto)" class="action-link"><span class="avaa-sulje"><img src="images/expander.png" alt="">{{ 'avaa-sulje-kaikki' | kaanna }}</span></a>
            </div> -->
            <div class="clearfix"></div>
            <div ng-include="'views/partials/perusteprojekti/sisaltoOsa.html'"></div>
            <div class="info-box" ng-show="peruste.sisalto.lapset.length === 0">
                {{ 'suoritustavalle-ei-ole-vielä-sisältöä' | kaanna }}.
            </div>
        </div>
    </div>
</div>
