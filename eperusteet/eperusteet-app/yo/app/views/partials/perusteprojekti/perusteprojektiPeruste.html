<!DOCTYPE html>
<!--
Copyright (c) 2013 The Finnish Board of Education - Opetushallitus

This program is free software: Licensed under the EUPL, Version 1.1 or - as
soon as they will be approved by the European Commission - subsequent versions
of the EUPL (the "Licence");

You may not use this work except in compliance with the Licence.
You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
European Union Public Licence for more details.
-->

  <button ng-if="voiMuokata()" ng-hide="editEnabled" ng-click="muokkaa()" class="floater btn btn-default" icon-role="edit">{{'muokkaa' | translate}}</button>  
  <button ng-disabled="generointiDisabled" class="floater btn btn-default" ng-click="generoiPdf()" icon-role="file">{{ generointiTeksti | kaanna }}</button>
  <div class="link-floater" ng-show="pdfLinkki !== null">
    <a ng-href="{{pdfLinkki}}">{{ 'lataa-pdf' | kaanna }}</a>    
  </div>
  

<h1 translate>projekti-peruste</h1>
<div class="clearfix"></div>
<form class="form-horizontal" name="perusteForm" role="form" novalidate>
  <div ng-form="projektinPerusteForm">
    <div class="form-area" ng-class="{viewmode: !editEnabled}">

      <div class="form-group-wrapper" ng-if="editEnabled">
        <formfield model="editablePeruste" model-var="nimi" label="perusteen-nimi"></formfield>
        <formfield model="editablePeruste" model-var="kuvaus" label="tiivistelmä" type="textarea"></formfield>
        <formfield model="editablePeruste" model-var="voimassaoloAlkaa" label="voimaantulo-pvm" type="date"
                   placeholder="anna-voimaantulo-pvm"></formfield>
        <formfield model="editablePeruste" model-var="voimassaoloLoppuu" label="voimassaolo-paattymispvm" type="date"
                   placeholder="anna-voimaantulo-loppu-pvm"></formfield>
      </div>


      <div ng-if="!editEnabled">
        <table class="perustiedot">
          <tr><th>{{'perusteen-nimi' | kaanna}}</th><td>{{ peruste.nimi | kaanna }}</td></tr>
          <tr><th>{{'tiivistelmä' | kaanna}}</th><td>{{ peruste.kuvaus | kaanna }}</td></tr>
          <tr><th>{{'voimaantulo-pvm' | kaanna}}</th><td pvm="peruste.voimassaoloAlkaa"></td></tr>
          <tr><th>{{'voimassaolo-paattymispvm' | kaanna}}</th><td pvm="peruste.voimassaoloLoppuu"></td></tr>
        </table>
      </div>

    </div>

    <h3>{{'peruste-koulutukset' | kaanna}}</h3>
    <p ng-show="editablePeruste.koulutukset.length === 0" translate>ei-koulutuksia</p>
    <table class="table table-condensed table-striped koulutukset" ng-show="editablePeruste.koulutukset.length > 0">
      <thead>
        <tr>
          <th translate>koulutuksen-nimi</th><th translate>perusteen-koodi</th><th translate>haku-koulutusala</th><th translate>haku-opintoala</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="koulutus in editablePeruste.koulutukset">
          <td><a href="" ng-if="editEnabled" ng-click="poistaKoulutus(koulutus.koulutuskoodi)">×</a> {{koulutus.nimi| kaanna}}</td>
          <td>{{koulutus.koulutuskoodi}}</td>
          <td>{{koulutusalaNimi(koulutus.koulutusalakoodi).nimi | kaanna}}</td>
          <td>{{opintoalaNimi(koulutus.opintoalakoodi).nimi | kaanna}}</td>
        </tr>
      </tbody>
    </table>
    <div>
      <button ng-if="editEnabled" icon-role="add" class="btn btn-default" type="button" ng-click="avaaKoodistoModaali()" ng-disabled="hakemassa">{{ "lisaa-koulutus" | kaanna }}</button>
    </div>
  </div>
</form>

