<!DOCTYPE html>
<!--
Copyright (c) 2013 The Finnish Board of Education - Opetushallitus

This program is free software: Licensed under the EUPL, Version 1.1 or - as
soon as they will be approved by the European Commission - subsequent versions
of the EUPL (the "Licence");

You may not use this work except in compliance with the Licence.
You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
European Union Public Licence for more details.
-->
<div class="main-content" id="main">
    <div class="row tutkinto-sisalto">
        <ul class="nav nav-tabs nav-justified">
            <li ng-class="{ active: valittuSuoritustapa === st.suoritustapakoodi }" ng-repeat="st in peruste.suoritustavat | orderBy:'suoritustapakoodi'"
                ng-click="vaihdaSuoritustapa(st.suoritustapakoodi)">
                <a href="">{{ st.suoritustapakoodi | kaanna }}</a>
             </li>
        </ul>
        <div class="tutkinto">
            <ul class="tutkinnonsisalto-list">
                <li class="list-element">
                    <h3>
                        {{ 'tutkinnonosat' | kaanna }}
                        <span class="pull-right">
                            <a href="" ng-click="navigoi('perusteprojekti.suoritustapa.tutkinnonosat')">
                                {{ 'näytä' | kaanna }}<span class="glyphicon glyphicon-chevron-right"></span>
                            </a>
                        </span>
                    </h3>
                </li>
                <li class="list-element">
                    <h3>
                        {{ 'tutkinnon-rakenne' | kaanna }}
                        <span class="pull-right">
                            <a href="" ng-click="navigoi('perusteprojekti.suoritustapa.muodostumissaannot')">
                                {{ 'näytä' | kaanna }}<span class="glyphicon glyphicon-chevron-right"></span>
                            </a>
                        </span>
                    </h3>
                </li>

                <hr>
                <h2>Tutkintokohtaiset osat ({{ peruste.sisalto.lapset.length }})</h2>
                <div class="input-group">
                    <input ng-model="rajaus" ng-change="rajaaSisaltoa()" placeholder="{{ 'rajaa-tutkintokohtaisia-osia' | kaanna }}" type="input" class="form-control">
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default btn-sm" ng-click="createSisalto()" ng-show="valittuSuoritustapa !== ''" icon-role="add">{{'lisaa-tutkintokohtainen-osa' | translate}}</button>
                    </span>
                </div>
                <div class="clearfix"></div>
                <span ng-show="sisalto.$filtered" ng-repeat="sisalto in peruste.sisalto.lapset | orderBy:aakkosJarjestys">
                    <li ng-click="sisalto.$opened = !sisalto.$opened" class="list-element">
                        <h3>
                            <span ng-show="sisalto.lapset.length > 0">
                                <span ng-hide="sisalto.$opened" class="glyphicon glyphicon-chevron-up"></span>
                                <span ng-show="sisalto.$opened" class="glyphicon glyphicon-chevron-down"></span>
                            </span>
                            {{ sisalto.perusteenOsa.nimi | kaanna }}
                            <span class="pull-right">
                                <a href="" ng-click="navigoi('perusteprojekti.suoritustapa.perusteenosa', { perusteenOsanTyyppi: 'tekstikappale', perusteenOsaId: sisalto.perusteenOsa.id})">
                                    {{ 'näytä' | kaanna }}<span class="glyphicon glyphicon-chevron-right"></span>
                                </a>
                            </span>
                        </h3>
                    </li>
                    <span ng-show="sisalto.$opened || (sl.$filtered && rajaus.length !== 0)" ng-repeat="sl in sisalto.lapset">
                        <li ng-click="sl.$opened = !sl.$opened" style="margin-left: 30px" class="list-element-child">
                            <h6>
                                <span ng-show="sl.lapset.length > 0">
                                    <span ng-hide="sl.$opened" class="glyphicon glyphicon-chevron-up"></span>
                                    <span ng-show="sl.$opened" class="glyphicon glyphicon-chevron-down"></span>
                                </span>
                                {{ sl.perusteenOsa.nimi | kaanna }}
                                <span class="pull-right">
                                    <a href="" ng-click="navigoi('perusteprojekti.suoritustapa.perusteenosa', { perusteenOsanTyyppi: 'tekstikappale', perusteenOsaId: sl.perusteenOsa.id})">
                                        {{ 'näytä' | kaanna }}<span class="glyphicon glyphicon-chevron-right"></span>
                                    </a>
                                </span>
                            </h6>
                            <div class="list-element-info">
                                <div>{{ 'muokattu-viimeksi' | kaanna }}: {{ sl.perusteenOsa.muokattu | aikaleima }}</div>
                                <div>{{ 'muokkaaja' | kaanna }}: Erkki Esimerkki</div>
                            </div>
                            <div ng-show="sl.$opened || (sl.$filtered && rajaus.length !== 0)">
                                <div ng-show="sl.lapset.length !== 0">
                                    <ul>
                                        <li ng-repeat="sll in sl.lapset">
                                            <a href="" ng-click="navigoi('perusteprojekti.suoritustapa.perusteenosa', { perusteenOsanTyyppi: 'tekstikappale', perusteenOsaId: sll.perusteenOsa.id})">
                                                {{ sll.perusteenOsa.nimi | kaanna }}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </span>
                </span>

                <div class="info-box" ng-show="peruste.sisalto.lapset.length === 0">
                    {{ 'suoritustavalle-ei-ole-vielä-sisältöä' | kaanna }}.
                </div>
            </ul>
        </div>
    </div>
</div>
