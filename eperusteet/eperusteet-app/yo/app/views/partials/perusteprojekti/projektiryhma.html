<!--
Copyright (c) 2013 The Finnish Board of Education - Opetushallitus

This program is free software: Licensed under the EUPL, Version 1.1 or - as
soon as they will be approved by the European Commission - subsequent versions
of the EUPL (the "Licence");

You may not use this work except in compliance with the Licence.
You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
European Union Public Licence for more details.
-->

<div class="row tyoryhma">
  <div class="col-md-12">
    <h1>
      {{ 'projekti-projektiryhma' | kaanna }}
      <span ng-show="!lataa && !error" class="ryhmapalkki">
        <span class="dropdown">
          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
            {{ tyyppi | kaanna }}
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
            <li role="presentation"><a ng-click="vaihdaTyyppi('kaikki')" role="menuitem" tabindex="-1" href="" kaanna>kaikki</a></li>
            <li ng-repeat="(k, v) in tyoryhmat" role="presentation">
              <a ng-click="vaihdaTyyppi(k)" role="menuitem" tabindex="-1" href="">{{ k }}</a>
            </li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="muokkaaTyoryhmaa()" href="" kaanna>luo-uusi</a></li>
          </ul>
        </span>
        <button ng-click="muokkaaTyoryhmaa(tyyppi)" ng-show="tyyppi !== 'kaikki'" class="btn btn-default" icon-role="edit" kaanna="muokkaa-ryhmaa"></button>
      </span>
    </h1>

    <div ng-show="lataa">
      <small-spinner></small-spinner>
      <span kaanna="ladataan-tyoryhman-tietoja"></span>
    </div>

    <div ng-show="!lataa && !error" class="row">
      <div ng-show="filterRyhma(v)" class="col-md-12 ryhma-johto" ng-repeat="(k, v) in ryhma">
        <h2>{{ k | kaanna }}</h2>
        <div ng-show="filterJasen(jasen)" class="ryhma-jasen" ng-repeat="jasen in v">
          <div class="ryhma-jasen-avatar">
            <div ng-show="!jasen.kuva" class="nimikirjain-avatar"
                 ng-style="styleFor(jasen)">{{ nimikirjaimet(jasen.$nimi) }}</div>
          </div>
          <div ng-if="!muokkausMoodi" class="ryhma-jasen-tiedot">
            <h4>{{ jasen.$nimi }} {{ jasen.$rejected }}</h4>
            <p>{{ 'puhelin' | kaanna }}: {{ jasen.$puhelinnumero || '-' }}</p>
            <p>{{ 'email' | kaanna }}: <a href="mailto:{{ jasen.$sahkoposti }}">{{ jasen.$sahkoposti }}</a></p>
          </div>
        </div>
      </div>
    </div>

    <div ng-if="error" class="alert alert-error" kaanna>perustetyoryhman-tietojen-hakeminen-epaonnistui</div>
  </div>
</div>
