<!DOCTYPE html>
<!--
Copyright (c) 2013 The Finnish Board of Education - Opetushallitus

This program is free software: Licensed under the EUPL, Version 1.1 or - as
soon as they will be approved by the European Commission - subsequent versions
of the EUPL (the "Licence");

You may not use this work except in compliance with the Licence.
You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
European Union Public Licence for more details.
-->

<button ng-if="voiMuokata()" ng-hide="editEnabled" ng-click="muokkaa()" class="floater btn btn-default" icon-role="edit" kaanna>muokkaa</button>

<div class="floater dropdown">
  <button ng-disabled="generointiDisabled" class="btn btn-default dropdown-toggle" data-toggle="dropdown" icon-role="file">{{ generointiTeksti | kaanna }}<span class="caret"></span></button>
  <ul class="dropdown-menu">
    <li ng-repeat="kieli in kielet"><a href="" ng-click="generoiPdf(kieli)" kaanna>luo-dokumentti-kielella-{{kieli}}</a></li>
    <li class="divider"></li>
    <li ng-repeat="dokumentti in dokumentit"><a ng-href="{{dokumentti.linkki}}"><span kaanna>uusin-dokumentti-kielella-{{dokumentti.kieli}}</span><br>{{dokumentti.valmistumisaika|date:'dd.MM.yyyy hh:mm:ss'}}</a></li>
  </ul>
</div>

<h1 kaanna>projekti-peruste</h1>
<div class="clearfix"></div>
<form class="form-horizontal" name="perusteForm" role="form" novalidate>
  <div ng-form="projektinPerusteForm">

    <div class="panel panel-default panel-clean">
      <div class="panel-heading">
        <h3 class="panel-title">{{'peruste-koulutukset' | kaanna}}</h3>
      </div>
      <div class="panel-body">
        <p ng-show="editablePeruste.koulutukset.length === 0 && !editEnabled" translate>ei-koulutuksia</p>
        <div class="koulutukset" ng-show="editablePeruste.koulutukset.length > 0">
          <div class="koulutus" ng-repeat="koulutus in editablePeruste.koulutukset">
            <div class="poisto" ng-if="editEnabled">
              <button icon-role="remove" class="btn btn-default btn-xs" ng-click="poistaKoulutus(koulutus.koulutuskoodi)">{{'poista' | kaanna}}</button>
            </div>
            <table class="aligned">
              <tr>
                <th>{{'koulutuksen-nimi' | kaanna}}</th>
                <td>{{koulutus.nimi| kaanna}}</td>
              </tr>
              <tr>
                <th>{{'perusteen-koodi' | kaanna}}</th>
                <td>{{koulutus.koulutuskoodi | koodisto}}</td>
              </tr>
              <tr>
                <th>{{'haku-koulutusala' | kaanna}}</th>
                <td>{{koulutusalaNimi(koulutus.koulutusalakoodi).nimi | kaanna}}</td>
              </tr>
              <tr>
                <th>{{'haku-opintoala' | kaanna}}</th>
                <td>{{opintoalaNimi(koulutus.opintoalakoodi).nimi | kaanna}}</td>
              </tr>
            </table>
          </div>
        </div>

        <div>
          <button ng-if="editEnabled" icon-role="add" class="btn btn-default" type="button"
                  ng-click="avaaKoodistoModaali()" ng-disabled="hakemassa">{{ "lisaa-koulutus" | kaanna }}</button>
        </div>
      </div>
    </div>

    <!-- *** TODO: backend-tuki laajuudelle ***
    <div class="panel panel-default panel-clean">
      <div class="panel-heading">
        <h3 class="panel-title">{{'laajuus' | kaanna}} ({{peruste.laajuus.yksikko}})</h3>
      </div>
      <div class="panel-body">
        <div ng-if="editEnabled">
          <formfield model="editablePeruste" model-var="laajuus.min" label="vahintaan" type="float" step="0.5"></formfield>
          <formfield model="editablePeruste" model-var="laajuus.max" label="enintaan" type="float" step="0.5"></formfield>
        </div>
        <table class="aligned" ng-show="!editEnabled">
          <tr><th>{{'vahintaan' | kaanna}}</th><td>{{peruste.laajuus.min | tyhja}}</td></tr>
          <tr><th>{{'enintaan' | kaanna}}</th><td>{{peruste.laajuus.max | tyhja}}</td></tr>
        </table>
      </div>
    </div> -->

    <div class="panel panel-default panel-clean">
      <div class="panel-heading">
        <h3 class="panel-title">{{'tiivistelm√§' | kaanna}}</h3>
      </div>
      <div class="panel-body">
        <ml-input ng-show="editEnabled" ml-data="editablePeruste.kuvaus" type="textarea"></ml-input>
        <p ng-show="hasContent(peruste.kuvaus) && !editEnabled">{{ peruste.kuvaus | kaanna }}</p>
        <p ng-show="!hasContent(peruste.kuvaus) && !editEnabled">{{'ei-tiivistelmaa' | kaanna}}</p>
      </div>
    </div>

    <div class="panel panel-default panel-clean">
      <div class="panel-heading">
        <h3 class="panel-title">{{'voimassaolo' | kaanna}}</h3>
      </div>
      <div class="panel-body">
        <div ng-if="editEnabled">
          <formfield model="editablePeruste" model-var="voimassaoloAlkaa" label="voimaantulo-pvm" type="date"
          placeholder="anna-voimaantulo-pvm"></formfield>
          <formfield model="editablePeruste" model-var="voimassaoloLoppuu" label="voimassaolo-paattymispvm" type="date"
          placeholder="anna-voimaantulo-loppu-pvm"></formfield>
        </div>

        <table class="aligned" ng-show="!editEnabled">
          <tr><th kaanna>voimaantulo-pvm</th><td pvm="peruste.voimassaoloAlkaa"></td></tr>
          <tr><th kaanna>voimassaolo-paattymispvm</th><td pvm="peruste.voimassaoloLoppuu"></td></tr>
        </table>
      </div>
    </div>


  </div>
</form>
