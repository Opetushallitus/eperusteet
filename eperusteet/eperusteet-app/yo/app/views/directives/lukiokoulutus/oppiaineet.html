<!--
  ~  Copyright (c) 2013 The Finnish Board of Education - Opetushallitus
  ~
  ~  This program is free software: Licensed under the EUPL, Version 1.1 or - as
  ~  soon as they will be approved by the European Commission - subsequent versions
  ~  of the EUPL (the "Licence");
  ~
  ~  You may not use this work except in compliance with the Licence.
  ~  You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl
  ~
  ~  This program is distributed in the hope that it will be useful,
  ~  but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~  European Union Public Licence for more details.
  -->

<tabset>
  <div class="action-buttons" ng-show="activeTab == 'puu'">
    <button icon-role="edit" class="floater btn" ng-show="!treehelpers.editMode"
            oikeustarkastelu="[{ target: 'peruste', permission: 'muokkaus' }, { target: 'peruste', permission: 'korjaus' }]"
            ng-click="toEditMode()" kaanna="'muokkaa-rakennetta'"></button>
  </div>
  <tab heading="{{'lukiooppiaineet-puu-tab-header' | kaanna}}"
       ng-click="selectTab('puu')" active="activeTab == 'puu'">
    <div class="lukio-oppiaineet-puu lukio-oppiaine-tab">
      <div class="main-column tree">
        <div class="action-buttons" ng-show="!treehelpers.editMode">
          <button icon-role="add" class="floater btn"
                  oikeustarkastelu="[{ target: 'peruste', permission: 'muokkaus' }, { target: 'peruste', permission: 'korjaus' }]"
                  ng-click="addOppiaine()" kaanna="'lisaa-oppiaine'"></button>
        </div>
        <div class="tree-con">
          <rajaus size="small" classes="puun-rajaus" model="treehelpers.haku"
                  callback="treeHaku()"
                  placeholder="{{ 'lukio-etsi-oppiaineista-ja-kursseista' || kaanna }}"></rajaus>
        </div>
        <div class="opetussialtopuu tree">
          <generic-tree tree-provider="treeOsatProvider"
                        ui-sortable-config="kurssiTreeConfig"></generic-tree>
        </div>
      </div>
      <div class="liittamattomat-column">
        <div class="action-buttons" ng-show="!treehelpers.editMode">
          <button icon-role="add" class="floater btn"
                  oikeustarkastelu="[{ target: 'peruste', permission: 'muokkaus' }, { target: 'peruste', permission: 'korjaus' }]"
                  ng-click="addKurssi()" kaanna="'lisaa-kurssi'"></button>
        </div>
        <h2 kaanna="lukio-liitamattomat-kurssit"></h2>

        <div class="tree-con">
          <rajaus size="small" classes="puun-rajaus" model="treehelpers.liittamattomienHaku"
                  callback="treeLiittamattomienHaku()"
                  placeholder="{{ 'lukio-etsi-kursseista' || kaanna }}"></rajaus>
        </div>
        <div ui-sortable="liittamattomatKurssitConfig" ng-model="liittamattomatKurssit"
             class="recursivetreeLiittamattomat">
          <div ng-repeat="kurssi in liittamattomatKurssit" class="liittamaton-kurssi recursivetree"
                ng-if="!kurssi.oppiaineet.length && !kurssi.$$hide">
            <span class="treehandle" icon-role="drag" ng-show="treehelpers.editMode"></span>
            <a ng-href="{{createUrl(kurssi)}}">
              <span class="koodi" ng-bind="kurssi.koodiArvo"></span>
              <span class="nimi" ng-bind="kurssi.nimi | kaanna"></span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </tab>
  <tab heading="{{'lukiooppiaineet-oppiaineet-tab-header'| kaanna}}" ng-click="selectTab('oppiaineet')"
       active="activeTab == 'oppiaineet'">
    <div class="lukio-oppiaine-tab">
      <div class="action-buttons additional">
        <button icon-role="add"
                oikeustarkastelu="[{ target: 'peruste', permission: 'muokkaus' }, { target: 'peruste', permission: 'korjaus' }]"
                class="floater btn" ng-click="addOppiaine()" kaanna="'lisaa-oppiaine'"></button>
      </div>
      <div osalistaus="oppiaineet" search-placeholder="lukio-etsi-oppiaineista"
           empty-placeholder="{{sisaltoState.emptyPlaceholder}}"
           show-laajuus="false" url-generator="createUrl(value)"></div>
    </div>
  </tab>
  <tab heading="{{'lukiooppiaineet-kurssit-tab-header'| kaanna}}" ng-click="selectTab('kurssit')"
        active="activeTab == 'kurssit'">
    <div class="lukio-oppiaine-tab">
      <div class="action-buttons additional">
        <button icon-role="add"
                oikeustarkastelu="[{ target: 'peruste', permission: 'muokkaus' }, { target: 'peruste', permission: 'korjaus' }]"
                class="floater btn" ng-click="addKurssi()" kaanna="'lisaa-kurssi'"></button>
      </div>
      <div osalistaus="kurssit" search-placeholder="lukio-etsi-kursseista"
           empty-placeholder="{{sisaltoState.emptyPlaceholder}}"
           show-laajuus="false" url-generator="createUrl(value)"></div>
    </div>
  </tab>
</tabset>
