<!-- FIXME: lokalisaatio -->

<div>
  <file-select id="fileselect-button" before-select="clearSelect" on-select="onFileSelect" on-progress="onProgress" read-type="binary"></file-select>
  <div class="btn-group">
    <button type="button" class="btn btn-default" ng-model="tutkinnonTyyppi" btn-radio="'ammattitutkinto'">Ammattitutkinto</button>
    <button type="button" class="btn btn-default" ng-model="tutkinnonTyyppi" btn-radio="'erikoisammattitutkinto'">Erikoisammattitutkinto</button>
    <button type="button" class="btn btn-default" ng-model="tutkinnonTyyppi" btn-radio="'perustutkinto'">Perustutkinto</button>
  </div>

  <div class="alert alert-warning" ng-show="warnings.length > 0">
    Tiedostossa oli huomion arvoisia ongelmia, mutta voit halutessasi yrittää jatkaa.
  </div>

  <!-- virheet -->
  <div ng-show="errors.length > 0">
    <div class="alert alert-danger">
      Antamassasi tiedostossa oli virheitä, jotka estävät tiedoston lukemisen eteenpäin. Korjaa seuraavat virheet ja lähetä tiedosto uudestaan.
    </div>
    <h3>Virheet</h3>
    <table class="table table-striped">
      <tr>
        <th>Solu</th>
        <th>Odotettu arvo</th>
        <th>Antamasi tiedoston arvo</th>
      </tr>
      <tr ng-repeat="error in errors" class="danger">
        <td>{{ error.cell }}</td>
        <td>{{ error.expected }}</td>
        <td>{{ error.actual }}</td>
      </tr>
    </table>
  </div>

  <!-- varoitukset -->
  <div ng-show="warnings.length > 0">
    <h3>Varoitukset</h3>
    <table class="table table-striped">
      <tr>
        <th>Solu</th>
        <th>Nimi</th>
        <th>Ongelma</th>
      </tr>
      <tr ng-repeat="warning in warnings" class="warning">
        <td>{{ warning.cell }}</td>
        <td>{{ warning.name.fi }}</td>
        <td>{{ warning.warning }}</td>
      </tr>
    </table>
  </div>

  <div ng-show="!alussa && !lukeeTiedostoa && errors.length === 0">
    <h3>Osatutkinnot</h3>
    <table class="table table-striped">
      <tr>
        <th>Koodi</th>
        <th>Nimi</th>
        <th>Tila</th>
        <th></th>
      </tr>
      <tr ng-repeat="ot in osatutkinnot">
        <td class="osatutkintoid">
          <input class="form-control osatutkintoid" type="text" ng-model="ot.koodi" />
        </td>
        <td>{{ ot.nimi.fi }}</td>
        <td>
          <span ng-show="ot.ladattu === 0" class="glyphicon glyphicon-ok"></span>
          <span ng-show="ot.ladattu === 1" class="glyphicon glyphicon-remove"></span>
        </td>
        <td class="text-right">
          <div class="btn-group">
            <button type="button" class="btn btn-default btn-xs">Muokkaa</button>
            <button type="button" class="btn btn-default btn-xs" ng-click="poistaOsatutkinto(ot)">
              <span class="glyphicon glyphicon-remove"></span>
            </button>
          </div>
        </td>
      </tr>
    </table>
  </div>

  <div ng-show="!alussa && !lukeeTiedostoa && errors.length === 0">
    <button ng-click="tallennaOsatutkinnot()" class="btn btn-success">
      <span class="glyphicon glyphicon-cloud-upload"></span>
      Tallenna
    </button>
  </div>

  <!-- Tallennusvirheet -->
  <div class="alert alert-danger" ng-show="uploadErrors.length > 0">
      Seuraavia osatutkintoja ei pystytty tallentamaan onnistuneesti:
      <table class="table table-striped">
        <tr>
          <th>Osatutkinto</th>
          <th>Syy</th>
        </tr>
        <tr ng-repeat="error in uploadErrors" class="danger">
          <td>{{ error.name.fi }}</td>
          <td>{{ error.message }}</td>
        </tr>
      </table>
  </div>

</div>
