<!DOCTYPE html>
<!--
Copyright (c) 2013 The Finnish Board of Education - Opetushallitus

This program is free software: Licensed under the EUPL, Version 1.1 or - as
soon as they will be approved by the European Commission - subsequent versions
of the EUPL (the "Licence");

You may not use this work except in compliance with the Licence.
You may obtain a copy of the Licence at: http://ec.europa.eu/idabc/eupl

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
European Union Public Licence for more details.
-->
<div class="row">
  <!-- Perusteteksti -->
  <!--lataus-elementti></lataus-elementti-->
  <!--div class="col-md-12" ng-hide="hakuMenossa"-->
  <!--div class="col-md-4" ng-include="'views/partials/suodattimet.html'"></div-->
  <div class="col-md-4">
      <div class="panel panel-default">
          <div class="panel-heading" translate>suodattimet</div>
          <div class="panel-body">
              <ul>
                  <li ng-show="suodatin.valittu" ng-repeat="suodatin in suodatin.otsikot">{{valitseKieli(suodatin)}}<span class="pull-right glyphicon glyphicon-remove pointer" ng-click="poistaSuodatin(suodatin)"></span></li>
              </ul>
              <select id="suodatin-tyyppi" ng-model="suodatinId" class="form-control" ng-change="suodatinValittu(suodatinId)">
                  <option value="" disabled selected translate>valitse-suodatin</option>
                  <option ng-repeat="otsikko in suodatin.otsikot" value="{{otsikko._id}}" ng-hide="otsikko.valittu">{{valitseKieli(otsikko)}}</option>
              </select>
          </div>
      </div>
  </div>
  <div class="col-md-8">

    <script type="text/ng-template"  id="lapset_renderer.html">
      <div ng-show="onkoSuodatettu(lapsi.perusteenOsa.nimi._id)">
          <esitys-otsikko id="{{lapsi.perusteenOsa.id}}">{{lapsi.perusteenOsa.nimi['fi']}}</esitys-otsikko>
          <div ng-bind-html="lapsi.perusteenOsa.teksti.fi"></div>
          <div ng-repeat="lapsi in lapsi.lapset" ng-include="'lapset_renderer.html'" ng-init="syvyys = syvyys + 1"></div>
      </div>
    </script>

    <div class="row">
        <div class="col-md-6">
        <div align="left">
            <span ng-class="suosikkiTyyli" style="font-size: 2em;" ng-click="asetaSuosikiksi()" title="aseta suosikiksi"></span>
        </div>
        </div>
        <div class="col-md-6">
            <div align="right">
                <div id="suoritustavat-vaihto" class="btn-group" ng-show="peruste.suoritustavat.length > 1">
                <button ng-click="vaihdaSuoritustapa('ops')" type="button" class="btn btn-default" ng-class="{ 'active' : suoritustapa === 'ops' }" translate>opetussuunnitelma</button>
                <button ng-click="vaihdaSuoritustapa('naytto')" type="button" class="btn btn-default" ng-class="{ 'active' : suoritustapa === 'naytto' }" translate>nayttotutkinto</button>
                </div>
            </div>
        </div>
    </div>

    <h1>{{valitseKieli(peruste.nimi)}} </h1>

    <p>
      {{'tutkintokoodi'|translate}}: {{peruste.tutkintokoodi}} <br>
      {{'koulutusalakoodi'|translate}}: {{peruste.koulutusalakoodi}} <br>
      Päiväys: {{peruste.paivays|date:'dd.MM.yyyy HH:mm:ss'}} <br>
    </p>


    <h2 id="{{peruste.rakenne.perusteenOsa.id}}">{{peruste.rakenne.perusteenOsa.nimi.fi}}</h2>
    <p ng-bind-html="peruste.rakenne.perusteenOsa.teksti.fi"></p>
    <div ng-repeat="lapsi in peruste.rakenne.lapset" ng-include="'lapset_renderer.html'" ng-init="syvyys = syvyys + 1"></div>

    <script type="text/ng-template" id='lehtirenderer.html'>
        {{data.otsikko}}
    </script>

    <!-- Tutkinnon rakenne puuesityksenä -->
    <div>
      <tree-wrapper muokkaus="true" ng-if="rakenne.$resolved" rakenne="rakenne"></tree-wrapper>
    </div>
    <div class="clearfix"></div>
    <hr>
    <button class="btn btn" ng-click="tallennaRakenne(rakenne)">Tallenna</button>
    <button class="btn btn-primary" ng-click="peruMuutokset()">Peru muutokset</button>

  </div>

</div>
